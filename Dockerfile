FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGN1c3RvbS1ydW50aW1lLWNvbm5lY3Rvci1hcGIKZGVzY3JpcHRp\
b246IEN1c3RvbSBSdW50aW1lIENvbm5lY3RvcgpiaW5kYWJsZTogVHJ1ZQphc3luYzogb3B0aW9u\
YWwKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBDdXN0\
b20gUnVudGltZSBDb25uZWN0b3IKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGZh\
IGZhLXBsdWcKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5hZXJvZ2Vhci5vcmcvY3Vz\
dG9tLXJ1bnRpbWUtY29ubmVjdG9yL2RvY3VtZW50YXRpb24uaHRtbCIKICBwcm92aWRlckRpc3Bs\
YXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6IFtdCiAgc2VydmljZU5hbWU6\
IGN1c3RvbS1ydW50aW1lLWNvbm5lY3RvcgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRl\
c2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lzIGN1c3RvbS1ydW50aW1lLWNvbm5l\
Y3Rvci1hcGIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoK\
ICAgIC0gbmFtZTogU0VSVklDRV9OQU1FCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6\
IHN0cmluZwogICAgICB0aXRsZTogU2VydmljZSBOYW1lCiAgICAtIG5hbWU6IFNFUlZJQ0VfVVJJ\
CiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogU2Vy\
dmljZSBVUkwKICAgIC0gbmFtZTogU0VSVklDRV9DT05GSUcKICAgICAgcmVxdWlyZWQ6IEZhbHNl\
CiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIHRp\
dGxlOiBTZXJ2aWNlIEpTT04gQ29uZmlndXJhdGlvbgogICAgYmluZF9wYXJhbWV0ZXJzOgogICAg\
LSBuYW1lOiBDTElFTlRfSUQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgIHRpdGxlOiBNb2JpbGUgQ2xpZW50IElk"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars  /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
