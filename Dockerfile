FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGN1c3RvbS1ydW50aW1lLWNvbm5lY3Rvci1hcGIKZGVzY3JpcHRp\
b246IEN1c3RvbSBSdW50aW1lIENvbm5lY3RvcgpiaW5kYWJsZTogVHJ1ZQphc3luYzogcmVxdWly\
ZWQKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCiAgLSBtb2JpbGUtY2xpZW50LWVuYWJsZWQKbWV0\
YWRhdGE6CiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBmYSBmYS1wbHVnCiAgZGlz\
cGxheU5hbWU6IEN1c3RvbSBSdW50aW1lIENvbm5lY3RvcgogIGRlcGVuZGVuY2llczogW10KICBk\
b2N1bWVudGF0aW9uVXJsOiAiaHR0cDovL3d3dy5hZXJvZ2Vhci5vcmcvY3VzdG9tLXJ1bnRpbWUt\
Y29ubmVjdG9yL2RvY3VtZW50YXRpb24uaHRtbCIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVk\
IEhhdCwgSW5jLiIKICBzZGstZG9jcy1hbmRyb2lkOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9y\
Zy9leHRlcm5hbC9hcGIvcnVudGltZS1jb25uZWN0b3IvYW5kcm9pZC5odG1sIgogIHNkay1kb2Nz\
LWNvcmRvdmE6ICJodHRwczovL2RvY3MuYWVyb2dlYXIub3JnL2V4dGVybmFsL2FwYi9ydW50aW1l\
LWNvbm5lY3Rvci9jb3Jkb3ZhLmh0bWwiCiAgc2RrLWRvY3MtaW9zOiAiaHR0cHM6Ly9kb2NzLmFl\
cm9nZWFyLm9yZy9leHRlcm5hbC9hcGIvcnVudGltZS1jb25uZWN0b3IvaW9zLmh0bWwiCiAgc2Rr\
LWRvY3MteGFtYXJpbjogImh0dHBzOi8vZG9jcy5hZXJvZ2Vhci5vcmcvZXh0ZXJuYWwvYXBiL3J1\
bnRpbWUtY29ubmVjdG9yL3hhbWFyaW4uaHRtbCIKICBzZXJ2aWNlTmFtZTogY3VzdG9tLXJ1bnRp\
bWUtY29ubmVjdG9yCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRo\
aXMgZGVmYXVsdCBwbGFuIGRlcGxveXMgY3VzdG9tLXJ1bnRpbWUtY29ubmVjdG9yLWFwYgogICAg\
ZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIG1vYmlsZWNsaWVudF9iaW5kX3BhcmFtZXRl\
cnNfZGF0YToKICAgICAgICAtICd7Im5hbWUiOiAiQ0xJRU5UX0lEIiwgInZhbHVlIjogIm1ldGFk\
YXRhLm5hbWUiLCAidHlwZSI6ICJwYXRoIn0nCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBT\
RVJWSUNFX05BTUUKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBTZXJ2aWNlIE5hbWUK\
ICAgICAgcmVxdWlyZWQ6IFRydWUKICAgIC0gbmFtZTogU0VSVklDRV9VUkkKICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgIHRpdGxlOiBTZXJ2aWNlIFVSTAogICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
LSBuYW1lOiBTRVJWSUNFX0NPTkZJRwogICAgICBkZWZhdWx0OiAne30nCiAgICAgIHR5cGU6IHN0\
cmluZwogICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgIHRpdGxlOiBTZXJ2aWNlIEpT\
T04gQ29uZmlndXJhdGlvbgogICAgICByZXF1aXJlZDogRmFsc2UKICAgIGJpbmRfcGFyYW1ldGVy\
czoKICAgIC0gbmFtZTogQ0xJRU5UX0lECiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTog\
TW9iaWxlIENsaWVudCBJRAogICAgICByZXF1aXJlZDogVHJ1ZQo="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars  /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
